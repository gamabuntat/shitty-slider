@use 'sass:math'

$double-vertical: '.ui-slider--vertical.ui-slider--interval'
$handle-width: 8px
$handle-heigth: 20px
$label-height: 18px
$label-gap: 2px
$track-size: 6px
$color-main: #615C70
$color-accent: #afacb9

.ui-slider
  border: .5px dashed pink

.ui-slider
  display: flex
  flex-direction: column
  justify-content: center
  padding: $label-height + $label-gap 0 0

  &--vertical
    flex-direction: row
    align-items: center
    justify-content: flex-end
    padding: math.div($label-height - $handle-width, 2) 0
    height: 35vh

  &__main-container
    position: relative
    padding: 0 math.div($handle-width, 2)
    display: flex
    flex-direction: column
    justify-content: center
    height: $handle-heigth
    box-sizing: border-box

  &--vertical &__main-container
    padding: math.div($handle-width, 2) 0
    align-items: center
    height: 100%

  &--interval &__main-container
    padding: 0 $handle-width

  #{$double-vertical} &__main-container
    padding: $handle-width 0

  %sub-giglet
    content: ''
    display: block
    flex-basis: 50%

  &__giglet
    display: flex
    position: absolute
    left: 0
    width: 100%
    height: $track-size
    background-color: $color-main

    &::before
      @extend %sub-giglet
      background-color: $color-main

    &::after
      @extend %sub-giglet
      background-color: $color-accent

  &--vertical &__giglet
    flex-direction: column
    width: $track-size
    height: 100%
    left: unset

    &::before
      background-color: $color-accent

    &::after
      background-color: $color-main

  &--interval &__giglet

    &::before
      background-color: $color-accent

  #{$double-vertical} &__giglet
    
    &::after
      background-color: $color-accent

  &__container
    display: flex
    justify-content: center
    align-items: center
    flex-basis: 100%
    position: relative

  &--vertical &__container
    width: $handle-heigth

  &__handle
    position: absolute
    margin: 0
    padding: 0
    width: $handle-width
    height: $handle-heigth
    border: none
    background-color: $color-main
    touch-action: none
    cursor: pointer
  
    &--start
      @extend .ui-slider__handle
      transform: translate(math.div(-$handle-width, 2))

    &--end
      @extend .ui-slider__handle
      display: none

    &--front
      z-index: 1
      
  &--vertical &__handle
    width: $handle-heigth
    height: $handle-width

    &--start
      transform: translate(0, math.div(-$handle-width, 2))

  &--interval &__handle

    &--start
      transform: translate(-$handle-width)

    &--end
      display: unset

  #{$double-vertical} &__handle

    &--start
      transform: translate(0)
    
    &--end
      transform: translate(0, -$handle-width)

  &__label
    display: inline-flex
    position: absolute
    overflow: auto
    top: -$label-height - $label-gap
    min-width: 25px
    width: max-content
    height: $label-height
    transform: translate(-50%)
    background-color: $color-main
    color: white
    pointer-events: none

    &--start
      @extend .ui-slider__label

    &--end
      @extend .ui-slider__label

    &--hidden
      display: none

  &--vertical &__label
    margin: auto
    transform: translate(0, -50%)
    right: calc(100% + #{$label-gap})
    top: unset

  &__track
    display: flex
    justify-content: space-between
    background-color: $color-accent
    width: 100%
    height: $track-size

  &--vertical &__track
    flex-direction: column
    width: $track-size
    height: 100%

  &--interval &__track
    background-color: $color-main

  &__progress-bar
    background-color: $color-main

    &--start
      @extend .ui-slider__progress-bar

    &--end
      @extend .ui-slider__progress-bar

  &--interval &__progress-bar
    background-color: $color-accent

  &__scale
    height: 20px
    background-color: lightgreen

  &--vertical &__scale
    width: 20px
    height: 100%

