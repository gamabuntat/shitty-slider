(()=>{"use strict";var t={910:(t,e,s)=>{s.r(e)},731:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t){this.component=t}bind(t,e,s){return this.component.addEventListener(t,e,s),this}unbind(t,e,s){return this.component.removeEventListener(t,e,s),this}}},373:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EventEmitter=void 0,e.EventEmitter=class{constructor(){this.events={}}on(t,e){return(this.events[t]||(this.events[t]=[])).push(e),this}emit(t,e=t.id){(this.events[e]||[]).forEach((e=>e(t)))}}},595:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e,s){this.service=t,this.view=e,this.handleModelUpdate=t=>{this.view.parseResponse(t)},this.handleViewUpdate=t=>{this.service.updateModel(t)},t.on(s,this.handleModelUpdate),e.on(s,this.handleViewUpdate)}}},698:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(373),o=i(s(917)),r=i(s(895)),h=i(s(913));class a extends n.EventEmitter{constructor(){super(...arguments),this.defaultOptions=h.default,this.selectedModel={...this.defaultOptions,id:""},this.models=[],this.selectedIndex=-1,this.validatedKeys=["step","min","max","from","to"]}static getInstance(){return a.instance||(a.instance=new a),a.instance}subscribe(t,e){const s=t||this.generateID();return this.on("sub"+s,e),s}removeModel(t){this.events[t]=[],this.events["sub"+t]=[],this.models.splice(this.findModelIndex(t),+(-1!==this.selectedIndex))}updateModel(t){this.addModel({...t}),this.emit({...t},"sub"+t.id)}add(t,e){const s=t||this.generateID(),i=this.models.length;return this.selectedModel={...this.selectedModel=this.models[this.findModelIndex(s)]||{...this.defaultOptions,id:s},...this.getValedatedOptions(e)},this.addModel(this.selectedModel),this.emit({...this.selectedModel}),this.emit({...this.selectedModel},"sub"+this.selectedModel.id),{model:{...this.selectedModel},isNew:i!==this.models.length}}addModel(t){this.models.splice(this.findModelIndex(t.id),+(-1!==this.selectedIndex),t)}findModelIndex(t){return this.selectedIndex=this.models.findIndex((e=>e.id===t))}generateID(){return String(Math.floor(Math.random()*Date.now()))}getValedatedOptions(t){const e={...t};return this.validatedKeys.forEach((t=>e[t]=this.validateConcreteOption(t,e))),!1===(t.isInterval??this.selectedModel.isInterval)&&(e.to=e.max),e}validateConcreteOption(t,e){const[s,i,n,h,a]=[e.step||this.selectedModel.step,e.min,e.max,e.from,e.to].map(this.preValidate,this),l=(0,r.default)(s);return{step:()=>Math.abs(s),min:()=>+i.toFixed(l),max:()=>Math.max(n,i+s),from:()=>Math.min(n,+(Math.ceil((Math.max(i,h)-i)/s)*s+i).toFixed(l)),to:()=>Math.min(n,+(Math.ceil(((0,o.default)(h,a,n)-i)/s)*s+i).toFixed(l))}[t]()}preValidate(t,e){return"number"==typeof t&&isFinite(t)?t:this.selectedModel[this.validatedKeys[e]]}}e.default=a},913:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.default={min:0,max:10,from:-1/0,to:1/0,step:1,isInterval:!1,isVertical:!1,isLabel:!0,isScale:!0}},990:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.VerticalConfig=e.HorizontalConfig=void 0;const n=i(s(917)),o=i(s(895));class r{constructor(t){this.response=t,this.update(t)}update(t=this.response){this.response=t;const{step:e,from:s,to:i}=t;this.n=(0,o.default)(e),this.divisionNumber=this.getDivisionNumber(),this.relativeStep=1/this.divisionNumber,this.fakeDiff=+(this.divisionNumber*e).toFixed(this.n),this.positions=[s,i].map(this.calcPosition,this),this.extremums=this.getExtremums()}getResponse(){return{...this.response}}getPositions(){return[...this.positions]}setPositions(t){this.positions=t.map(this.validate,this),this.updateExtremums(),this.updateResponse()}sampling(t){return 1/this.divisionNumber*Math.round(t*this.divisionNumber)}generateAllPositions(t=0){const e=[t];for(;e.length<=this.divisionNumber;)e.push(this.getNext(e[e.length-1]));return e}getDivisionNumber(){const t=this.response.min,e=this.response.max,s=(0,o.default)(t),i=(0,o.default)(e);return Math.ceil(+(e-t).toFixed(Math.max(s,i))/this.response.step)}validate(t,e){return(0,n.default)(this.extremums[e].min,this.sampling(t),this.extremums[e].max)}updateResponse(){this.response.from=this.calcAbsolutePosition(this.positions[0]),this.response.to=this.calcAbsolutePosition(this.positions[1])}}class h extends r{swap(){return new a(this.response)}getPrev(t){return Math.max(0,this.sampling(t)-this.relativeStep)}getNext(t){return Math.min(1,this.sampling(t)+this.relativeStep)}getAllPositions(){const t=this.generateAllPositions(0);return{absolutePositions:t.map(this.calcAbsolutePosition,this),positions:t}}calcPosition(t){return(0,n.default)(0,this.sampling(Math.round((t==this.response.max?this.fakeDiff:t-this.response.min)/this.response.step)*this.response.step/this.fakeDiff),1)}calcAbsolutePosition(t){return Math.min(+(this.sampling(t)*this.fakeDiff+this.response.min).toFixed(this.n),this.response.max)}updateExtremums(){this.extremums[0].max=this.positions[1],this.extremums[1].min=this.positions[0]}getExtremums(){return[{min:0,max:this.positions[1]},{min:this.positions[0],max:1}]}}e.HorizontalConfig=h;class a extends r{swap(){return new h(this.response)}getPrev(t){return Math.min(1,this.sampling(t)+this.relativeStep)}getNext(t){return Math.max(0,this.sampling(t)-this.relativeStep)}getAllPositions(){const t=this.generateAllPositions(1).reverse();return{absolutePositions:t.map(this.calcAbsolutePosition,this),positions:t}}calcPosition(t){return(0,n.default)(0,this.sampling(1-Math.round((t==this.response.max?this.fakeDiff:t-this.response.min)/this.response.step)*this.response.step/this.fakeDiff),1)}calcAbsolutePosition(t){return Math.min(+((1-this.sampling(t))*this.fakeDiff+this.response.min).toFixed(this.n),this.response.max)}updateExtremums(){this.extremums[0].min=this.positions[1],this.extremums[1].max=this.positions[0]}getExtremums(){return[{min:this.positions[1],max:1},{min:0,max:this.positions[0]}]}}e.VerticalConfig=a},983:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerticalContainerView=e.HorizontalContainerView=void 0;class s{constructor(t){this.component=t}}class i extends s{getCoord(){return this.component.getBoundingClientRect().x}getSize(){return this.component.getBoundingClientRect().width}swap(){return new n(this.component)}}e.HorizontalContainerView=i;class n extends s{getCoord(){return this.component.getBoundingClientRect().y}getSize(){return this.component.getBoundingClientRect().height}swap(){return new i(this.component)}}e.VerticalContainerView=n},525:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.VerticalHandleView=e.HorizontalHandleView=void 0;const n=i(s(731));class o extends n.default{constructor(t){super(t),this.shiftX=0,this.shiftY=0,this.pointerCoordX=0,this.pointerCoordY=0,this.isCapture=!1,this.InFocus=!1,this.handleComponentPointerdown=t=>{this.setShifts(t),this.isCapture=!0,this.fixPointer(t.pointerId)},this.handleComponentPointermove=t=>{this.setPointerCoords(t)},this.handleComponentLostpointercapture=()=>{this.isCapture=!1},this.handleComponentFocusin=()=>{this.InFocus=!0},this.handleComponentFocusout=()=>{this.InFocus=!1},this.bindListeners()}getCaptureStatus(){return this.isCapture}getFocusStatus(){return this.InFocus}calcPosition(t,e){return(this.getPointerCoord()-t-this.getShift()-this.getOffset())/e||0}resetPositions(){this.component.style.left="",this.component.style.top=""}unbindListeners(){this.unbind("pointerdown",this.handleComponentPointerdown).unbind("pointermove",this.handleComponentPointermove).unbind("lostpointercapture",this.handleComponentLostpointercapture).unbind("focusin",this.handleComponentFocusin).unbind("focusout",this.handleComponentFocusout)}bindListeners(){this.bind("pointerdown",this.handleComponentPointerdown).bind("pointermove",this.handleComponentPointermove).bind("lostpointercapture",this.handleComponentLostpointercapture).bind("focusin",this.handleComponentFocusin).bind("focusout",this.handleComponentFocusout)}setShifts(t){this.shiftX=t.offsetX??0,this.shiftY=t.offsetY??0}setPointerCoords(t){this.pointerCoordX=t.x??0,this.pointerCoordY=t.y??0}fixPointer(t){this.component.setPointerCapture(t)}}class r extends o{move(t){this.component.style.left=100*t+"%"}swap(){return this.unbindListeners(),this.resetPositions(),new h(this.component)}getPointerCoord(){return this.pointerCoordX}getShift(){return this.shiftX}getOffset(){return new DOMMatrix(getComputedStyle(this.component).transform).e}}e.HorizontalHandleView=r;class h extends o{move(t){this.component.style.top=100*t+"%"}swap(){return this.unbindListeners(),this.resetPositions(),new r(this.component)}getPointerCoord(){return this.pointerCoordY}getShift(){return this.shiftY}getOffset(){return new DOMMatrix(getComputedStyle(this.component).transform).f}}e.VerticalHandleView=h},445:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t){this.component=t,this.hiddenMod=`${this.component.classList[0].replace(/--.*/,"")}--hidden`}updateValue(t){this.component.innerText=t}toggleHiddenMode(){this.component.classList.toggle(this.hiddenMod)}}},529:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EndProgressBarView=e.StartProgressBarView=void 0;class s{constructor(t){this.component=t}}e.StartProgressBarView=class extends s{resize(t){this.component.style.flexBasis=100*t+"%"}},e.EndProgressBarView=class extends s{resize(t){this.component.style.flexBasis=100*(1-t)+"%"}}},863:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.VerticalScaleView=e.HorizontalScaleView=void 0;const n=i(s(731));class o extends n.default{constructor(t){super(t),this.labelSize=0,this.buttons=[],this.lastPosition=0,this.delay=100,this.prevN=0,this.handleScaleClick=t=>{const e=t.target.closest(`.${this.buttonClass}`);e&&(this.lastPosition=Number(e.getAttribute("data-position")))},this.handleScaleResize=()=>{if(this.component.classList.contains(this.hiddenMod))return;this.updateSize();const t=this.getN();t!==this.prevN&&(this.prevN=t,clearTimeout(this.timer),this.timer=setTimeout((()=>(this.hideButtons(),(()=>{this.restoreUsability(this.prevN-2,[this.buttons.slice(1,-1)])})(),this.showExtremeButtons())),this.delay))},this.handleWindowLoad=()=>{this.resetSizes(),this.buttons.forEach(this.setAttrSize,this)},this.container=this.getContainer(),this.component.innerHTML="",this.component.insertAdjacentElement("beforeend",this.container),this.updateSize(),this.hiddenMod=this.getElemClass("--hidden"),this.buttonClass=this.getElemClass("-button"),this.buttonHiddenMod=this.getElemClass("-button--hidden"),this.labelClass=this.getElemClass("-label"),this.resizeObserver=new ResizeObserver(this.handleScaleResize),this.bindListeners()}update(t){this.component.classList.contains(this.hiddenMod)||(this.resetSizes(),this.container.innerHTML="",this.buttons=t.map((t=>{const e=this.getButton(t);return this.container.insertAdjacentElement("beforeend",e),this.setLabelSize(e),this.setAttrSize(e),this.toggleButtonHiddenMod(e),e})),this.prevN=this.getN(),this.restoreUsability(this.prevN-2,[this.buttons.slice(1,-1)]),this.showExtremeButtons())}getLastPosition(){return this.lastPosition}toggleHiddenMode(){this.component.classList.toggle(this.hiddenMod)}resetSizes(){this.component.style.width="",this.component.style.height=""}getElemClass(t){return`${(this.component.classList[0]||"").replace(/--.*/,"")}${t}`}unbindListeners(){this.unbind("click",this.handleScaleClick).resizeObserver.unobserve(this.component),window.removeEventListener("load",this.handleWindowLoad)}bindListeners(){this.bind("click",this.handleScaleClick).resizeObserver.observe(this.component),window.addEventListener("load",this.handleWindowLoad)}getN(){return Math.min(this.buttons.length,Math.floor(this.size/this.labelSize)||0)}restoreUsability(t,e=[this.buttons]){if(t<=0)return;const s=[];let i=t,n=0;for(;n<e.length/2;){const t=e[n],o=Math.floor(t.length/2);if(this.toggleButtonHiddenMod(t[o]),i-=1,i<=0)return;t.length>1&&s.push(t.slice(0,o)),t.length>2&&s.push(t.slice(o+1));const r=e[e.length-1-n],h=Math.floor(r.length/2);if(n!=e.length-1-n){if(this.toggleButtonHiddenMod(r[h]),i-=1,i<=0)return;r.length>1&&s.push(r.slice(0,h)),r.length>2&&s.push(r.slice(h+1))}n+=1}this.restoreUsability(i,s)}showExtremeButtons(){this.prevN>=1&&this.toggleButtonHiddenMod(this.buttons[0]),this.prevN>=2&&this.toggleButtonHiddenMod(this.buttons[this.buttons.length-1])}getButton(t){const e=document.createElement("button");e.classList.add(this.buttonClass),e.dataset.position=String(t);const s=document.createElement("span");return s.classList.add(this.labelClass),s.innerText=String(t),e.insertAdjacentElement("beforeend",s),e}getContainer(){const t=document.createElement("div");return t.classList.add(this.getElemClass("-container")),t}hideButtons(){this.buttons.forEach((t=>t.classList.add(this.buttonHiddenMod)))}toggleButtonHiddenMod(t){t.classList.toggle(this.buttonHiddenMod)}}class r extends o{swap(){return this.unbindListeners(),new h(this.component)}updateSize(){this.size=this.component.getBoundingClientRect().width}setLabelSize(t){this.labelSize=Math.max(t.children[0].getBoundingClientRect().width,this.labelSize)}setAttrSize(t){this.component.style.height=`${Math.max(parseFloat(getComputedStyle(this.component).height),t.children[0].getBoundingClientRect().height)}px`}}e.HorizontalScaleView=r;class h extends o{swap(){return this.unbindListeners(),new r(this.component)}updateSize(){this.size=this.component.getBoundingClientRect().height}setLabelSize(t){this.labelSize=Math.max(t.children[0].getBoundingClientRect().height,this.labelSize)}setAttrSize(t){this.component.style.width=`${Math.max(parseFloat(getComputedStyle(this.component).width),t.children[0].getBoundingClientRect().width)}px`}}e.VerticalScaleView=h},204:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t){this.component=t;const e=this.component.classList[0];this.BEMVerticalMod=e+"--vertical",this.BEMIntervalMod=e+"--interval"}toggleVerticalMod(){this.component.classList.toggle(this.BEMVerticalMod)}toggleIntervalMod(){this.component.classList.toggle(this.BEMIntervalMod)}}},735:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(373),o=i(s(326)),r=s(990),h=i(s(204)),a=s(983),l=s(525),d=s(529),c=i(s(445)),u=s(863);class p extends n.EventEmitter{constructor(t,e){super(),this.components={},this.sliderBEMBlockName="ui-slider",this.handleHandlePointermove=()=>{this.checkCaptureStatus()&&(this.config.setPositions(this.config.getPositions().map(((t,e)=>this.handles[e].getCaptureStatus()?this.handles[e].calcPosition(this.container.getCoord(),this.container.getSize()):t))),this.setInMotion(),this.emit(this.config.getResponse()))},this.handleHandleKeydown=t=>{const e=["ArrowUp","ArrowRight"],s=["ArrowDown","ArrowLeft"];this.config.setPositions(this.config.getPositions().map(((i,n)=>this.handles[n].getFocusStatus()?e.includes(t.code)?this.config.getNext(i):s.includes(t.code)?this.config.getPrev(i):i:i))),this.setInMotion(),this.emit(this.config.getResponse())},this.handleScaleClick=()=>{const t=this.config.calcPosition(this.scale.getLastPosition()),e=this.config.getPositions(),s=e.map((e=>Math.abs(e-t)||1/0));let i=s.indexOf(Math.min(...s));e[0]===e[1]&&(t>e[1]&&(i=1),t<e[0]&&(i=0),this.config.getResponse().isVertical&&(i=+!i)),this.config.getResponse().isInterval||(i=0),e[i]=t,this.config.setPositions(e),this.setInMotion(),this.emit(this.config.getResponse())},this.config=new r.HorizontalConfig({...t,isVertical:!1,isInterval:!1,isLabel:!0,isScale:!0}),e.insertAdjacentElement("beforeend",this.createSlider(p.tree)),this.slider=new h.default(this.components[this.sliderBEMBlockName]),this.container=new a.HorizontalContainerView(this.components.container),this.handles=[this.components.handleStart,this.components.handleEnd].map((t=>new l.HorizontalHandleView(t))),this.progressBars=[new d.StartProgressBarView(this.components.progressBarStart),new d.EndProgressBarView(this.components.progressBarEnd)],this.labels=[this.components.labelStart,this.components.labelEnd].map((t=>new c.default(t))),this.scale=new u.HorizontalScaleView(this.components.scale),this.parseResponse(t),this.bindListeners(),e.id=t.id}parseResponse(t){this.config.getResponse().isVertical!==t.isVertical&&this.updateViewOrientation(),this.config.getResponse().isInterval!==t.isInterval&&this.slider.toggleIntervalMod(),this.config.getResponse().isScale!==t.isScale&&this.scale.toggleHiddenMode(),this.config.getResponse().isLabel!==t.isLabel&&this.labels.forEach((t=>t.toggleHiddenMode())),this.config.update(t),this.scale.update(this.config.getAllPositions().absolutePositions),this.setInMotion(),this.rebindListeners()}updateViewOrientation(){this.config=this.config.swap(),this.slider.toggleVerticalMod(),this.container=this.container.swap(),this.handles=this.handles.map((t=>t.swap())),this.progressBars.reverse(),this.scale=this.scale.swap()}createSlider({name:t,elementType:e,childs:s=[]},i){const n=document.createElement(e);return this.saveComponent(i?t:this.sliderBEMBlockName=t||this.sliderBEMBlockName,n),n.classList.add(i?this.getClass(t):this.sliderBEMBlockName),i&&i.insertAdjacentElement("beforeend",n),s.forEach((t=>this.createSlider(t,n))),n}saveComponent(t,e){this.components[t]=e}getClass(t){return this.sliderBEMBlockName+"__"+t.replace(/(?<=.)[A-Z]/g,"-$&").toLowerCase().replace(/(?<base1>.*(?=-(start|end)))(?<mod>-(start|end))(?<base2>.*)/,"$<base1>$<base2>-$<mod>")}rebindListeners(){this.unbindListeners(),this.bindListeners()}bindListeners(){this.handles.forEach((t=>t.bind("pointermove",this.handleHandlePointermove).bind("keydown",this.handleHandleKeydown))),this.scale.bind("click",this.handleScaleClick)}unbindListeners(){this.handles.forEach((t=>t.unbind("pointermove",this.handleHandlePointermove).unbind("keydown",this.handleHandleKeydown))),this.scale.unbind("click",this.handleScaleClick)}checkCaptureStatus(){return!!this.handles.find((t=>t.getCaptureStatus()))}setInMotion(){const{from:t,to:e}=this.config.getResponse();[t,e].forEach(((t,e)=>{const s=this.config.getPositions()[e];this.handles[e].move(s),this.progressBars[e].resize(s),this.labels[e].updateValue(String(t))}))}}p.tree=o.default,e.default=p},326:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ui-slider",elementType:"div",childs:[{name:"mainContainer",elementType:"div",childs:[{name:"giglet",elementType:"div"},{name:"container",elementType:"div",childs:[{name:"handleStart",elementType:"button",childs:[{name:"labelStart",elementType:"div"}]},{name:"handleEnd",elementType:"button",childs:[{name:"labelEnd",elementType:"div"}]},{name:"track",elementType:"div",childs:[{name:"progressBarStart",elementType:"div"},{name:"progressBarEnd",elementType:"div"}]}]}]},{name:"scale",elementType:"div"}]}},917:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,s){return Math.max(t,Math.min(s,e))}},895:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(Math.abs(t)-Math.abs(Math.trunc(t))==0)return 0;const e=String(t),s=(e.match(/\d+$/)||[])[0];return e.includes("e")?+s:+s.length}},341:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),s(910);const n=i(s(595)),o=i(s(735)),r=i(s(698));jQuery.fn.slider=function(t){if(this.destroy=()=>(this[0].innerHTML="",r.default.getInstance().removeModel(this[0].id),this),this.subscribe=t=>{var e;const s=r.default.getInstance().subscribe(this[0].id,t);(e=this[0]).id||(e.id=s)},t){const{isNew:e,model:s}=r.default.getInstance().add(this[0].id,t);e&&new n.default(r.default.getInstance(),new o.default(s,this[0]),s.id)}return this}}},e={};function s(i){var n=e[i];if(void 0!==n)return n.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,s),o.exports}s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s(341)})();